(function(){var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},f="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function g(){g=function(){};f.Symbol||(f.Symbol=ba)}var ca=0;function ba(a){return"jscomp_symbol_"+(a||"")+ca++}
function h(){g();var a=f.Symbol.iterator;a||(a=f.Symbol.iterator=f.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return k(this)}});h=function(){}}function k(a){var b=0;return da(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function da(a){h();a={next:a};a[f.Symbol.iterator]=function(){return this};return a}function l(a){h();g();h();var b=a[Symbol.iterator];return b?b.call(a):k(a)}
function m(a){if(!(a instanceof Array)){a=l(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ea(a,b){function c(){}c.prototype=b.prototype;a.H=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var fa=/:(80|443)$/,n=document.createElement("a"),p={};
function q(a){a=a&&"."!=a?a:location.href;if(p[a])return p[a];n.href=a;if("."==a.charAt(0)||"/"==a.charAt(0))return q(n.href);var b="80"==n.port||"443"==n.port?"":n.port,b="0"==b?"":b,c=n.host.replace(fa,"");return p[a]={hash:n.hash,host:c,hostname:n.hostname,href:n.href,origin:n.origin?n.origin:n.protocol+"//"+c,pathname:"/"==n.pathname.charAt(0)?n.pathname:"/"+n.pathname,port:b,protocol:n.protocol,search:n.search}}var r=[];
function ha(a,b){var c=this;this.context=a;this.m=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.b=[];this.a=[];this.g=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.a[c.a.length-1].apply(null,[].concat(m(b)))};this.c?a.set(b,this.g):a[b]=this.g}function t(a,b){a.b.push(b);u(a)}function v(a,b){b=a.b.indexOf(b);-1<b&&(a.b.splice(b,1),0<a.b.length?u(a):(b=r.indexOf(a),-1<b&&(r.splice(b,1),a.c?a.context.set(a.m,a.f):a.context[a.m]=a.f)))}
function u(a){a.a=[];for(var b,c=0;b=a.b[c];c++){var d=a.a[c-1]||a.f.bind(a.context);a.a.push(b(d))}}function x(a,b){var c=r.filter(function(c){return c.context==a&&c.m==b})[0];c||(c=new ha(a,b),r.push(c));return c}function y(a,b,c,d){if("function"==typeof d){var e=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,void 0,void 0);e(c)}}}return z({},a,b)}
function ia(a){var b;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];clearTimeout(b);b=setTimeout(function(){return a.apply(null,[].concat(m(d)))},500)}}
var z=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=0,e=c.length;d<e;d++){var E=Object(c[d]),w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&(a[w]=E[w])}return a},A=function ja(b){return b?(b^16*Math.random()>>b/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,ja)};
function B(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b}var C={o:1,w:2,A:3,B:4,C:5,D:6,F:7,G:8,u:9,s:10},D=Object.keys(C).length;
function F(a,b){var c=a.get("\x26_au"),c=parseInt(c||"0",16).toString(2);if(c.length<D)for(var d=D-c.length;d;)c="0"+c,d--;b=D-b;c=c.substr(0,b)+1+c.substr(b+1);a.set("\x26_au",parseInt(c||"0",2).toString(16))}function G(a){a.set("\x26_av","2.4.1")}
function H(a,b){var c=C.o;G(a);F(a,c);this.a=z({},b);this.g=a;this.b=this.a.stripQuery&&this.a.queryDimensionIndex?"dimension"+this.a.queryDimensionIndex:null;this.f=this.f.bind(this);this.c=this.c.bind(this);b=this.f;t(x(a,"get"),b);b=this.c;t(x(a,"buildHitTask"),b)}H.prototype.f=function(a){var b=this;return function(c){if("page"==c||c==b.b){var d={location:a("location"),page:a("page")};return I(b,d)[c]}return a(c)}};
H.prototype.c=function(a){var b=this;return function(c){var d=I(b,{location:c.get("location"),page:c.get("page")});c.set(d,null,!0);a(c)}};
function I(a,b){var c=q(b.page||b.location),d=c.pathname;if(a.a.indexFilename){var e=d.split("/");a.a.indexFilename==e[e.length-1]&&(e[e.length-1]="",d=e.join("/"))}"remove"==a.a.trailingSlash?d=d.replace(/\/+$/,""):"add"==a.a.trailingSlash&&(/\.\w+$/.test(d)||"/"==d.substr(-1)||(d+="/"));d={page:d+(a.a.stripQuery?ka(a,c.search):c.search)};b.location&&(d.location=b.location);a.b&&(d[a.b]=c.search.slice(1)||"(not set)");return"function"==typeof a.a.urlFieldsFilter?(b=a.a.urlFieldsFilter(d,q),c={page:b.page,
location:b.location},a.b&&(c[a.b]=b[a.b]),c):d}function ka(a,b){if(Array.isArray(a.a.queryParamsWhitelist)){var c=[];b.slice(1).split("\x26").forEach(function(b){var d=l(b.split("\x3d"));b=d.next().value;d=d.next().value;-1<a.a.queryParamsWhitelist.indexOf(b)&&d&&c.push([b,d])});return c.length?"?"+c.map(function(a){return a.join("\x3d")}).join("\x26"):""}return""}H.prototype.remove=function(){var a=this.f;v(x(this.g,"get"),a);a=this.c;v(x(this.g,"buildHitTask"),a)};B("cleanUrlTracker",H);
function J(a,b){var c=C.u;G(a);F(a,c);history.pushState&&window.addEventListener&&(this.a=z({shouldTrackUrlChange:this.shouldTrackUrlChange,trackReplaceState:!1,fieldsObj:{},hitFilter:null},b),this.g=a,this.i=location.pathname+location.search,this.c=this.c.bind(this),this.f=this.f.bind(this),this.b=this.b.bind(this),a=this.c,t(x(history,"pushState"),a),a=this.f,t(x(history,"replaceState"),a),window.addEventListener("popstate",this.b))}
J.prototype.c=function(a){var b=this;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];a.apply(null,[].concat(m(d)));K(b,!0)}};J.prototype.f=function(a){var b=this;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];a.apply(null,[].concat(m(d)));K(b,!1)}};J.prototype.b=function(){K(this,!0)};
function K(a,b){setTimeout(function(){var c=a.i,d=location.pathname+location.search;c!=d&&a.a.shouldTrackUrlChange.call(a,d,c)&&(a.i=d,a.g.set({page:d,title:document.title}),(b||a.a.trackReplaceState)&&a.g.send("pageview",y({transport:"beacon"},a.a.fieldsObj,a.g,a.a.hitFilter)))},0)}J.prototype.shouldTrackUrlChange=function(a,b){return!(!a||!b)};J.prototype.remove=function(){var a=this.c;v(x(history,"pushState"),a);a=this.f;v(x(history,"replaceState"),a);window.removeEventListener("popstate",this.b)};
B("urlChangeTracker",J);function L(){this.b={}}L.prototype.v=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(this.b[a]=this.b[a]||[]).forEach(function(a){return a.apply(null,[].concat(m(c)))})};var M={},N=!1,O;function P(a,b){b=void 0===b?{}:b;this.b={};this.a=a;this.j=b;this.h=null}ea(P,L);function Q(a,b,c){a=["autotrack",a,b].join(":");M[a]||(M[a]=new P(a,c),N||(window.addEventListener("storage",R),N=!0));return M[a]}
function S(){if(null!=O)return O;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),O=!0}catch(a){O=!1}return O}P.prototype.get=function(){if(this.h)return this.h;if(S())try{this.h=T(window.localStorage.getItem(this.a))}catch(a){}return this.h=z({},this.j,this.h)};P.prototype.set=function(a){this.h=z({},this.j,this.h,a);if(S())try{var b=JSON.stringify(this.h);window.localStorage.setItem(this.a,b)}catch(c){}};
function U(a){a.h={};if(S())try{window.localStorage.removeItem(a.a)}catch(b){}}function R(a){var b=M[a.key];if(b){var c=z({},b.j,T(a.oldValue));a=z({},b.j,T(a.newValue));b.h=a;b.v("externalSet",a,c)}}function T(a){var b={};if(a)try{b=JSON.parse(a)}catch(c){}return b}var V={};
function W(a,b,c){this.f=a;this.timeout=b||X;this.timeZone=c;b=this.b=this.b.bind(this);t(x(a,"sendHitTask"),b);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(d){}this.a=Q(a.get("trackingId"),"session",{hitTime:0,isExpired:!1});this.a.get().id||this.a.set({id:A()})}
W.prototype.isExpired=function(a){a=void 0===a?this.a.get().id:a;if(a!=this.a.get().id)return!0;a=this.a.get();if(a.isExpired)return!0;var b=a.hitTime;return b&&(a=new Date,b=new Date(b),a-b>6E4*this.timeout||this.c&&this.c.format(a)!=this.c.format(b))?!0:!1};W.prototype.b=function(a){var b=this;return function(c){a(c);var d=c.get("sessionControl");c="start"==d||b.isExpired();var d="end"==d,e=b.a.get();e.hitTime=+new Date;c&&(e.isExpired=!1,e.id=A());d&&(e.isExpired=!0);b.a.set(e)}};var X=30;
function Y(a,b){var c=C.s;G(a);F(a,c);if(window.addEventListener){this.b=z({increaseThreshold:20,sessionTimeout:X,fieldsObj:{}},b);this.f=a;this.c=Z(this);this.g=ia(this.g.bind(this));this.l=this.l.bind(this);this.a=Q(a.get("trackingId"),"plugins/max-scroll-tracker");b=this.b.sessionTimeout;var c=this.b.timeZone,d=a.get("trackingId");this.i=V[d]?V[d]:V[d]=new W(a,b,c);b=this.l;t(x(a,"set"),b);la(this)}}function la(a){100>(a.a.get()[a.c]||0)&&window.addEventListener("scroll",a.g)}
Y.prototype.g=function(){var a=document.documentElement,b=document.body,a=Math.min(100,Math.max(0,Math.round(window.pageYOffset/(Math.max(a.offsetHeight,a.scrollHeight,b.offsetHeight,b.scrollHeight)-window.innerHeight)*100))),b=this.i.a.get().id;b!=this.a.get().sessionId&&(U(this.a),this.a.set({sessionId:b}));if(this.i.isExpired(this.a.get().sessionId))U(this.a);else if(b=this.a.get()[this.c]||0,a>b&&(100!=a&&100!=b||window.removeEventListener("scroll",this.g),b=a-b,100==a||b>=this.b.increaseThreshold)){var c=
{};this.a.set((c[this.c]=a,c.sessionId=this.i.a.get().id,c));a={transport:"beacon",eventCategory:"Max Scroll",eventAction:"increase",eventValue:b,eventLabel:String(a),nonInteraction:!0};this.b.maxScrollMetricIndex&&(a["metric"+this.b.maxScrollMetricIndex]=b);this.f.send("event",y(a,this.b.fieldsObj,this.f,this.b.hitFilter))}};Y.prototype.l=function(a){var b=this;return function(c,d){a(c,d);var e={};("object"==typeof c&&null!==c?c:(e[c]=d,e)).page&&(c=b.c,b.c=Z(b),b.c!=c&&la(b))}};
function Z(a){a=q(a.f.get("page")||a.f.get("location"));return a.pathname+a.search}Y.prototype.remove=function(){var a=this.i,b=a.b;v(x(a.f,"sendHitTask"),b);delete M[a.a.a];Object.keys(M).length||(window.removeEventListener("storage",R),N=!1);delete V[a.f.get("trackingId")];window.removeEventListener("scroll",this.g);a=this.l;v(x(this.f,"set"),a)};B("maxScrollTracker",Y);})();
//# sourceMappingURL=autotrack.custom.js.map